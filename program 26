#include <stdio.h>
#include <string.h>

struct file {
    char fname[20];
} f[10];

struct dir {
    char dname[20];
    int fcnt;
    struct file f[10];
} d[10];

int main() {
    int n, i, j, ch;
    char dname[20], fname[20];

    printf("Enter number of directories: ");
    scanf("%d", &n);
    for(i = 0; i < n; i++) {
        printf("Enter directory name: ");
        scanf("%s", d[i].dname);
        d[i].fcnt = 0;
    }

    do {
        printf("\n1. Create File  2. Delete File  3. Search File  4. List  5. Exit\n");
        scanf("%d", &ch);

        if(ch == 1) {
            printf("Enter directory name: ");
            scanf("%s", dname);
            for(i = 0; i < n; i++)
                if(strcmp(d[i].dname, dname) == 0) {
                    printf("Enter file name: ");
                    scanf("%s", d[i].f[d[i].fcnt].fname);
                    d[i].fcnt++;
                    break;
                }
        }
        else if(ch == 2) {
            printf("Enter directory name: ");
            scanf("%s", dname);
            printf("Enter file name to delete: ");
            scanf("%s", fname);
            for(i = 0; i < n; i++) {
                if(strcmp(d[i].dname, dname) == 0) {
                    for(j = 0; j < d[i].fcnt; j++) {
                        if(strcmp(d[i].f[j].fname, fname) == 0) {
                            printf("File deleted.\n");
                            d[i].f[j] = d[i].f[d[i].fcnt - 1];
                            d[i].fcnt--;
                        }
                    }
                }
            }
        }
        else if(ch == 3) {
            printf("Enter directory: ");
            scanf("%s", dname);
            printf("Enter file name: ");
            scanf("%s", fname);
            for(i = 0; i < n; i++)
                if(strcmp(d[i].dname, dname) == 0)
                    for(j = 0; j < d[i].fcnt; j++)
                        if(strcmp(d[i].f[j].fname, fname) == 0)
                            printf("File Found.\n");
        }
        else if(ch == 4) {
            for(i = 0; i < n; i++) {
                printf("\nDirectory %s:", d[i].dname);
                for(j = 0; j < d[i].fcnt; j++)
                    printf(" %s", d[i].f[j].fname);
            }
        }
    } while(ch != 5);

    return 0;
}
